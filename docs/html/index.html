

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cryptor APIs &mdash; chat  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> chat
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Cryptor APIs</a></li>
<li><a class="reference internal" href="#server-apis">Server APIs</a><ul>
<li><a class="reference internal" href="#module-server.ClientThread">ClientThread</a></li>
<li><a class="reference internal" href="#module-server.Handler">MsgHandler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#client-apis">Client APIs</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">chat</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Cryptor APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="module-cryptor.Cryptor">
<span id="cryptor-apis"></span><h1>Cryptor APIs<a class="headerlink" href="#module-cryptor.Cryptor" title="Permalink to this headline">¶</a></h1>
<p>Cryptor is based on AES-CBC-16</p>
<dl class="function">
<dt id="cryptor.Cryptor.en">
<code class="sig-prename descclassname">cryptor.Cryptor.</code><code class="sig-name descname">en</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="headerlink" href="#cryptor.Cryptor.en" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt: Encode the string into a byte-stream, then add it to a multiple of 16, then obtained a         symmetric encryption key that is updated daily and then encrypt the string with the key.It is worth noting         that ‘’ is used in the completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – str String to be encrypted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>byte Encrypted byte stream</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cryptor.Cryptor.de">
<code class="sig-prename descclassname">cryptor.Cryptor.</code><code class="sig-name descname">de</code><span class="sig-paren">(</span><em class="sig-param">byte</em><span class="sig-paren">)</span><a class="headerlink" href="#cryptor.Cryptor.de" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrypt: Obtained the symmetric encrypted key, decrypt the byte stream and removed ‘’,finally decoded         it into a string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>byte</strong> – byte Byte stream to be decrypted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str Decrypted string</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="server-apis">
<h1>Server APIs<a class="headerlink" href="#server-apis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-server.ClientThread">
<span id="clientthread"></span><h2>ClientThread<a class="headerlink" href="#module-server.ClientThread" title="Permalink to this headline">¶</a></h2>
<p>ClientThread: Each thread corresponds to one client(User)</p>
<dl class="function">
<dt id="server.ClientThread.run">
<code class="sig-prename descclassname">server.ClientThread.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#server.ClientThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>main process of ClientThread
Instantiate one handler, recv byte stream and decrypt it, then load it as json, pass the json to the handler.         When handler returns logout information or some error arise, the current thread is terminated and socket is          closed.</p>
</dd></dl>

</div>
<div class="section" id="module-server.Handler">
<span id="msghandler"></span><h2>MsgHandler<a class="headerlink" href="#module-server.Handler" title="Permalink to this headline">¶</a></h2>
<p>Handle the msg or files</p>
<dl class="function">
<dt id="server.Handler.remove_user">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">remove_user</code><span class="sig-paren">(</span><em class="sig-param">user</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.remove_user" title="Permalink to this definition">¶</a></dt>
<dd><p>remove user from user_pool</p>
<dl class="field-list simple">
<dt class="field-odd">Method</dt>
<dd class="field-odd"><p>classmethod</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>user</strong> – user_instance user to be removed</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.send_json">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">send_json</code><span class="sig-paren">(</span><em class="sig-param">users</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.send_json" title="Permalink to this definition">¶</a></dt>
<dd><p>send json to users: dumps the json data into string and send to users</p>
<dl class="field-list simple">
<dt class="field-odd">Method</dt>
<dd class="field-odd"><p>staticmethod</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>users</strong> – user_instance_list user to be sent</p></li>
<li><p><strong>data</strong> – json data to be sent</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.send_json_back">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">send_json_back</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.send_json_back" title="Permalink to this definition">¶</a></dt>
<dd><p>send json back to self.user</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json data to be sent</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.send_file">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">send_file</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">users</em>, <em class="sig-param">size</em>, <em class="sig-param">ext</em>, <em class="sig-param">bin_data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.send_file" title="Permalink to this definition">¶</a></dt>
<dd><p>send file to users: Traverse all users: send a file header and wait for ack before continuing to send         all file data to client</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>send file header first and won’t send file until recv_ack</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>users</strong> – user_instance_list user to be sent</p></li>
<li><p><strong>size</strong> – int size of file(byte_stream)</p></li>
<li><p><strong>ext</strong> – str file extension</p></li>
<li><p><strong>bin_data</strong> – byte file(byte_stream)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.recv_file">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">recv_file</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">size</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.recv_file" title="Permalink to this definition">¶</a></dt>
<dd><p>recv file from self.user: send ack to allow client send file, then recv file piece by piece until         file size matches or none have received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> – int size of file(byte_stream)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.send_ack">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">send_ack</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.send_ack" title="Permalink to this definition">¶</a></dt>
<dd><p>send ack to allow client send file</p>
</dd></dl>

<dl class="function">
<dt id="server.Handler.recv_ack">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">recv_ack</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">user</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.recv_ack" title="Permalink to this definition">¶</a></dt>
<dd><p>recv ack to allow self send file</p>
<dl class="field-list simple">
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>if user!=self.user, ack package is handled by other threads. Threads communicate through         Handler.ack_buffer to share recv_ack information</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>user</strong> – user_instance</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.private_msg">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">private_msg</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.private_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>forward private msg for self.user</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json private msg</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.group_msg">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">group_msg</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.group_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>forward group msg for self.user</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json group msg</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.private_file">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">private_file</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.private_file" title="Permalink to this definition">¶</a></dt>
<dd><p>forward private file for self.user</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json private file header</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.group_file">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">group_file</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.group_file" title="Permalink to this definition">¶</a></dt>
<dd><p>forward group file for self.user</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json group file header</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.login">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">login</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.login" title="Permalink to this definition">¶</a></dt>
<dd><p>deal with the login package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json login package</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.logout">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">logout</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">_</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>deal with the logout package</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>_</strong> – useless</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.ping">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">ping</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.ping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="server.Handler.get_list">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">get_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>get user list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.Handler.__main__">
<code class="sig-prename descclassname">server.Handler.</code><code class="sig-name descname">__main__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#server.Handler.__main__" title="Permalink to this definition">¶</a></dt>
<dd><p>main process of handler
Use switcher to switch the package type, and run the corresponding handle_function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – json recv_package</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="client-apis">
<h1>Client APIs<a class="headerlink" href="#client-apis" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, cquai

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>